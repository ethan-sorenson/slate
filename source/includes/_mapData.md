# Map Data

The Map Data endpoints can be used to retrieve data from the data source defined in SmartConnect. If the data source is a query, a call will be made by SmartConnect to the source application for live data.

<aside class="warning">You will not be able to get data from real-time data source maps.</aside>

## GetAllData

This endpoint retrieves the current defined source for the specified process.

### HTTP Request

<div class="api-endpoint">
	<div class="endpoint-data">
		<i class="label label-post">POST</i>
		<h6>https://{{API_Url}}/GetAllData</h6>
	</div>
</div>

> To retrieve currently defined source data, use this code:

```shell
curl POST "{{API Url}}/GetAllData?token={{Token}}&mapKey={{mapKey}}" \
  -H 'Content-Type: application/x-www-form-urlencoded' \
  -H 'Accept: application/xml' 
```

```python
import requests

url = "{{API Url}}/GetAllData?token={{Token}}&mapKey={{mapKey}}"
headers = {
  'Content-Type': 'application/x-www-form-urlencoded',
  'Accept': 'application/xml'
}

response = requests.request("POST", url, headers=headers)

print(response.text.encode('utf8'))
```

> The above command returns XML structured like this:

```xml
<string xmlns="http://schemas.microsoft.com/2003/10/Serialization/">&lt;MyDataSet&gt;&#xD;
  &lt;Table01&gt;&#xD;
    &lt;AccountNumber&gt;&lt;![CDATA[CUST001]]&gt;&lt;/AccountNumber&gt;&#xD;
    &lt;AccountName&gt;&lt;![CDATA[Purus Limited]]&gt;&lt;/AccountName&gt;&#xD;
    &lt;AddressCode&gt;&lt;![CDATA[Other]]&gt;&lt;/AddressCode&gt;&#xD;
    &lt;Address1&gt;&lt;![CDATA[373-1399 Ultrices St.]]&gt;&lt;/Address1&gt;&#xD;
    &lt;City&gt;&lt;![CDATA[Denver]]&gt;&lt;/City&gt;&#xD;
    &lt;State&gt;&lt;![CDATA[CO]]&gt;&lt;/State&gt;&#xD;
    &lt;ZIP&gt;&lt;![CDATA[92336]]&gt;&lt;/ZIP&gt;&#xD;
    &lt;Phone&gt;&lt;![CDATA[(303) 654-2228]]&gt;&lt;/Phone&gt;&#xD;
    &lt;Currency&gt;&lt;![CDATA[CAD$]]&gt;&lt;/Currency&gt;&#xD;
  &lt;/Table01&gt;&#xD;
&lt;/MyDataSet&gt;</string>
```
### Query Parameters

Parameter | Required | Description
--------- | ------- | -----------
token | true | Token generated by the GetToken endpoint
mapKey | true | Unique identifier for the process to retrieve


<aside class="warning">Currently this endpoint only returns data as XML</aside>

## GetAllDataWithVariables

This endpoint retrieves the current defined source for the specified process. If the data source is using Global Variables in the query, the values passed in the body will be applied as filters prior to retrieving the data.

### HTTP Request

<div class="api-endpoint">
	<div class="endpoint-data">
		<i class="label label-post">POST</i>
		<h6>https://{{API_Url}}/GetAllDataWithVariables</h6>
	</div>
</div>


> To retrieve currently defined source with Global Variable filters, use this code:

```shell
curl POST "{{API Url}}/GetAllDataWithVariables?token={{Token}}&mapKey={{mapKey}}" \
  -H 'Content-Type: application/json' \
  -H 'Accept: application/xml' \
  -d '[
        {
          "Key": "GBL_TEST",
          "Value": "107210"
         },
       {
          "Key": "GBL_TEST2",
          "Value": "Sample"
        }
      ]'
```

```python
import requests

url = "{{API Url}}/GetAllDataWithVariables?token={{Token}}&mapKey={{mapKey}}"
headers = {
  'Content-Type': 'application/json',
  'Accept': 'application/xml'
}
payload = 
[
    {
        "Key": "GBL_TEST",
        "Value": "107210"
    },
    {
        "Key": "GBL_TEST2",
        "Value": "Sample"
    }
]

response = requests.request("POST", url, headers=headers, data = payload)

print(response.text.encode('utf8'))
```

> The above command returns XML structured like this:

```xml
<string xmlns="http://schemas.microsoft.com/2003/10/Serialization/">&lt;MyDataSet&gt;&#xD;
  &lt;Table01&gt;&#xD;
    &lt;AccountNumber&gt;&lt;![CDATA[CUST001]]&gt;&lt;/AccountNumber&gt;&#xD;
    &lt;AccountName&gt;&lt;![CDATA[Purus Limited]]&gt;&lt;/AccountName&gt;&#xD;
    &lt;AddressCode&gt;&lt;![CDATA[Other]]&gt;&lt;/AddressCode&gt;&#xD;
    &lt;Address1&gt;&lt;![CDATA[373-1399 Ultrices St.]]&gt;&lt;/Address1&gt;&#xD;
    &lt;City&gt;&lt;![CDATA[Denver]]&gt;&lt;/City&gt;&#xD;
    &lt;State&gt;&lt;![CDATA[CO]]&gt;&lt;/State&gt;&#xD;
    &lt;ZIP&gt;&lt;![CDATA[92336]]&gt;&lt;/ZIP&gt;&#xD;
    &lt;Phone&gt;&lt;![CDATA[(303) 654-2228]]&gt;&lt;/Phone&gt;&#xD;
    &lt;Currency&gt;&lt;![CDATA[CAD$]]&gt;&lt;/Currency&gt;&#xD;
  &lt;/Table01&gt;&#xD;
&lt;/MyDataSet&gt;</string>
```
### Query Parameters

Parameter | Required | Description
--------- | ------- | -----------
token | true | Token generated by the GetToken endpoint
mapKey | true | Unique identifier for the process to retrieve


<aside class="warning">Currently this endpoint only returns data as XML</aside>
